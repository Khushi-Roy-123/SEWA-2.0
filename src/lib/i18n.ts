import React, { createContext, useContext, useState, useMemo } from 'react';

const translations = {
  en: {
    // Auth
    login: 'Login',
    signup: 'Sign Up',
    emailAddress: 'Email Address',
    password: 'Password',
    fullName: 'Full Name',
    confirmPassword: 'Confirm Password',
    forgotPassword: 'Forgot Password?',
    rememberMe: 'Remember me',
    loginToYourAccount: 'Login to your account',
    dontHaveAccount: "Don't have an account?",
    createAnAccount: 'Create an account',
    alreadyHaveAccount: 'Already have an account?',
    validation_emailRequired: 'Email is required',
    validation_emailInvalid: 'Invalid email format',
    validation_passwordRequired: 'Password is required',
    validation_passwordLength: 'Password must be at least 6 characters',
    validation_nameRequired: 'Full name is required',
    validation_confirmPasswordRequired: 'Please confirm your password',
    validation_passwordsNoMatch: 'Passwords do not match',
    auth_loginSuccess: 'Login successful! Redirecting...',
    auth_loginError: 'Invalid credentials. Please try again.',
    auth_signupSuccess: 'Account created successfully! Please log in.',
    auth_signupError: 'An error occurred during sign up.',
    auth_resetPasswordEmailSent: 'Password reset email sent!',
    logout: 'Logout',
    language: 'Language',
    
    // Layout / Navigation
    dashboard: 'Dashboard',
    symptomChecker: 'Symptom Checker',
    appointments: 'Appointments',
    medications: 'Medications',
    records: 'Records',
    profile: 'Profile',
    vitalSigns: 'Vital Signs',
    mentalHealth: 'Mental Health',
    drugPrices: 'Drug Prices',
    healthAnalytics: 'Health Analytics',
    shareProfile: 'Share Profile',
    emergencyServices: 'Emergency Services',
    atmanirbharBharat: 'Atmanirbhar Bharat',
    selfReliantIndia: 'Self-Reliant India',
    sewaCode: 'Sewa Code',
    enterSewaCode: 'Enter Sewa Code',
    viewReport: 'View Report',
    madeInIndia: 'Made with ❤️ in India',
    digitalIndia: 'Digital India Initiative',

    // Dashboard
    welcomeBack: 'Hello, {name}',
    healthSummaryToday: "Your health status today",
    upcomingAppointment: 'Next Appointment',
    appointmentTomorrow: 'Tomorrow at 10:30 AM',
    nextMedication: 'Next Medication',
    checkingMedications: 'Syncing...',
    addMedicationPrompt: 'Add medication',
    noMedicationsToday: 'All doses completed',
    dueAtTime: 'Due at {time}',
    quickActions: 'Services',
    symptomCheckerActionTitle: 'Check Symptoms',
    symptomCheckerActionDesc: 'AI-powered diagnostic assistance.',
    uploadRecordActionTitle: 'Upload record',
    uploadRecordActionDesc: 'Digitize your medical history.',
    monitorVitalsActionTitle: 'Live Monitor',
    monitorVitalsActionDesc: 'Real-time heart rate and SpO2 tracking.',
    status: 'Status',
    
    // Analytics
    analyticsTitle: 'AI Health Analytics',
    analyticsSubtitle: 'AI-driven insights based on your complete medical history and physical profile.',
    runAnalysis: 'Generate Health Report',
    analyzingHistory: 'Processing records...',
    healthIndexTrend: 'Health Index Trend',
    dietPlanTitle: 'AI Personalized Diet Plan',
    dietPlanSubtitle: 'Optimized for your weight, height, and age.',
    physicalProfile: 'Physical Profile',
    weight: 'Weight (kg)',
    height: 'Height (cm)',
    age: 'Age',
    saveProfile: 'Save Profile',
    noRecordsToAnalyze: 'Not enough records to perform analysis. Try uploading some medical documents first!',
    noChangesDetected: 'No changes detected. Add or delete records to run a new analysis.',
    lastAnalysis: 'Last Analysis',
    analysisRecommendations: 'AI Recommendations',
    bloodGroup: 'Blood Group',
    allergies: 'Allergies',

    // Share
    shareTitle: 'Sewa Share',
    shareSubtitle: 'Generate a secure QR code to share your medical summary with doctors or emergency responders.',
    generateQR: 'Generate QR Code',
    scanMe: 'Scan to View Medical ID',
    medicalID: 'Verified Medical ID',
    emergencyAccessOnly: 'For medical professional use only.',

    // Symptom Checker & Recommendations
    describeSymptomsPrompt: 'Describe your symptoms for an accurate AI-powered analysis.',
    symptoms: 'Symptoms',
    symptomsPlaceholder: 'e.g., I have a persistent cough...',
    selectLanguage: 'Language',
    voiceInput: 'Voice',
    startRecording: 'Record',
    stopRecording: 'Stop',
    recording: 'Listening...',
    submitSymptoms: 'Analyze Symptoms',
    commonSymptoms: 'Common',
    headache: 'Headache',
    fever: 'Fever',
    cough: 'Cough',
    fatigue: 'Fatigue',
    nausea: 'Nausea',
    shortBreath: 'Shortness of breath',
    recommendationsTitle: 'Specialist Recommendations',
    recommendationsSubtitle: 'Suggested consultation paths.',
    loadingRecommendations: 'Processing symptoms...',
    errorRecommendations: 'Consultation failed. Try again.',
    reasonForRecommendation: 'Context',
    sampleDoctors: 'Specialists',
    bookAppointment: 'Book Visit',
    deepAnalysisTitle: "Deep Analysis",
    disclaimerTitle: "Disclaimer",
    disclaimerText: "AI provided information is not medical advice.",
    potentialConditions: "Possible Conditions",
    likelihood: "Likelihood",
    severity: "Severity",
    recommendedNextSteps: "Next Steps",
    questionsForDoctor: "Doctor Questions",
    sources: "Sources",
    severityUrgent: "URGENT",
    severityRoutine: "ROUTINE",
    severityMonitor: "MONITOR",
    getDeeperAnalysis: "Detailed Report",
    analyzing: "Analyzing...",

    // Records
    uploadRecordTitle: 'Upload Record',
    uploadRecordSubtitle: 'Digitize your medical documents.',
    uploadFromFile: 'Select File',
    useCamera: 'Open Camera',
    capture: 'Capture',
    closeCamera: 'Exit Camera',
    imagePreview: 'Preview',
    extractText: 'Run OCR',
    extractingText: 'Extracting...',
    extractionError: 'Scan failed.',
    extractedText: 'Extracted Content',
    analyzeAndTranslate: 'Analyze & Translate',
    
    analyzedRecordTitle: 'AI Analysis',
    analyzedRecordSubtitle: 'Summary of scanned document.',
    selectTranslationLanguage: 'Target Language',
    translationLoading: 'Translating...',
    translationError: 'Translation failed.',
    translatedText: 'Translation',
    originalText: 'Source',
    
    // Medications
    addMedication: 'Add Medication',
    editMedication: 'Edit Medication',
    medicationName: 'Medication Name',
    dosage: 'Dosage',
    active: 'Active',
    inactive: 'Inactive',
    reminderTimes: 'Schedules',
    addTime: 'Add Time',
    daysOfWeek: 'Days',
    save: 'Save',
    cancel: 'Cancel',
    delete: 'Delete',
    notificationPermission: 'Enable alerts.',
    notificationsEnabled: 'Alerts Active',
    notificationsEnabledDesc: 'Reminders are on.',
    notificationsBlocked: 'Alerts Blocked',
    notificationsBlockedDesc: 'Check browser settings.',
    getMedicationReminders: 'Medication Alerts',
    getMedicationRemindersDesc: 'Get dosage notifications.',
    enableNotifications: 'Enable Alerts',
    
    // Drug Prices
    drugPricesTitle: 'Pharmacy Pricing',
    drugPricesSubtitle: 'Compare brand vs generic costs.',
    searchDrugPlaceholder: 'Search medication...',
    search: 'Search',
    searching: 'Syncing...',
    errorDrugPrices: 'Data unavailable.',
    brandNamePrice: 'Brand Cost',
    genericAlternatives: 'Generics',
    manufacturer: 'Maker',
    potentialSavings: 'Savings',
    
    // Vitals Monitor
    vitalsTitle: 'Live Monitor',
    vitalsSubtitle: 'Connected medical tracking.',
    statusDisconnected: 'Off',
    statusConnecting: 'Linking...',
    statusConnected: 'Active',
    statusError: 'Error',
    connectDevice: 'Pair Device',
    disconnectDevice: 'Unpair',
    heartRate: 'Heart Rate',
    bpm: 'BPM',
    bloodPressure: 'BP',
    oxygenSaturation: 'SpO2',
    sendEmergencyAlert: 'EMERGENCY ALERT',
    sendingAlert: 'Transmitting...',
    alertSent: 'SOS Sent',
    emergencyMessagePreview: 'Alert transmission:',
    alertGenerationError: 'SOS failure.',
    resetZoom: 'Reset',
    
    // Mental Health
    mentalHealthTitle: 'Mental Wellness',
    mentalHealthSubtitle: 'Emotional health tools.',
    moodTrackerTitle: "Daily Mood",
    moodRecorded: "Saved",
    yourMoodThisWeek: 'Weekly Trend',
    meditationTitle: "Meditation",
    meditationDesc: "Relaxation tools.",
    aiCompanionTitle: "AI Companion",
    aiCompanionPlaceholder: "Say something...",
    aiCompanionSend: "Send",
    aiCompanionTyping: 'Typing...',
    suggestMeditationAction: 'Start Session',
    moodStarterHappy: "Great! What made it so?",
    moodStarterGood: "Excellent. Highlights?",
    moodStarterNeutral: "Checking in. Thoughts?",
    moodStarterWorried: "I'm here. What's on your mind?",
    moodStarterSad: "Let's talk. I'm listening.",
    aiCompanionSystemInstruction: "Friendly AI wellness support.",
    myJournal: "Journal",
    journalPlaceholder: "Write your thoughts...",
    saveEntry: "Save",
    editEntry: "Edit",
    deleteEntry: "Delete",
    readMore: "More",
    readLess: "Less",
    deleteConfirmation: "Delete this?",
  },
  hi: {
    // Auth
    login: 'लॉगिन',
    signup: 'साइन अप करें',
    emailAddress: 'ईमेल पता',
    password: 'पासवर्ड',
    fullName: 'पूरा नाम',
    confirmPassword: 'पासवर्ड की पुष्टि करें',
    forgotPassword: 'पासवर्ड भूल गए?',
    rememberMe: 'मुझे याद रखें',
    loginToYourAccount: 'अपने खाते में लॉगिन करें',
    dontHaveAccount: "क्या आपका खाता नहीं है?",
    createAnAccount: 'खाता बनाएं',
    alreadyHaveAccount: 'क्या आपके पास पहले से खाता है?',
    validation_emailRequired: 'ईमेल आवश्यक है',
    validation_emailInvalid: 'अमान्य ईमेल प्रारूप',
    validation_passwordRequired: 'पासवर्ड आवश्यक है',
    validation_passwordLength: 'पासवर्ड कम से कम 6 अक्षरों का होना चाहिए',
    validation_nameRequired: 'पूरा नाम आवश्यक है',
    validation_confirmPasswordRequired: 'कृपया अपने पासवर्ड की पुष्टि करें',
    validation_passwordsNoMatch: 'पासवर्ड मेल नहीं खाते',
    auth_loginSuccess: 'लॉगिन सफल! पुनर्निर्देशित किया जा रहा है...',
    auth_loginError: 'अमान्य क्रेडेंशियल। कृपया पुनः प्रयास करें।',
    auth_signupSuccess: 'खाता सफलतापूर्वक बनाया गया! कृपया लॉगिन करें।',
    auth_signupError: 'साइन अप के दौरान एक त्रुटि हुई।',
    auth_resetPasswordEmailSent: 'पासवर्ड रीसेट ईमेल भेज दिया गया है!',
    logout: 'लॉगआउट',
    language: 'भाषा',
    
    // Layout / Navigation
    dashboard: 'डैशबोर्ड',
    symptomChecker: 'लक्षण जांचक',
    appointments: 'नियुक्तियाँ',
    medications: 'दवाइयाँ',
    records: 'रिकॉर्ड',
    profile: 'प्रोफ़ाइल',
    vitalSigns: 'महत्वपूर्ण संकेत',
    mentalHealth: 'मानसिक स्वास्थ्य',
    drugPrices: 'दवा की कीमतें',
    healthAnalytics: 'स्वास्थ्य विश्लेषण',
    shareProfile: 'प्रोफ़ाइल साझा करें',
    emergencyServices: 'आपातकालीन सेवाएं',
    atmanirbharBharat: 'आत्मनिर्भर भारत',
    selfReliantIndia: 'स्वावलंबी भारत',
    sewaCode: 'सेवा कोड',
    enterSewaCode: 'सेवा कोड दर्ज करें',
    viewReport: 'रिपोर्ट देखें',
    madeInIndia: 'भारत में ❤️ के साथ निर्मित',
    digitalIndia: 'डिजिटल इंडिया पहल',

    // Dashboard
    welcomeBack: 'नमस्ते, {name}',
    healthSummaryToday: "आज आपकी स्वास्थ्य स्थिति",
    upcomingAppointment: 'अगली नियुक्ति',
    appointmentTomorrow: 'कल सुबह 10:30 बजे',
    nextMedication: 'अगली दवा',
    checkingMedications: 'सिंक हो रहा है...',
    addMedicationPrompt: 'दवा जोड़ें',
    noMedicationsToday: 'सभी खुराकें पूरी हो गईं',
    dueAtTime: '{time} पर देय',
    quickActions: 'सेवाएं',
    symptomCheckerActionTitle: 'लक्षणों की जाँच करें',
    symptomCheckerActionDesc: 'एआई-संचालित नैदानिक सहायता।',
    uploadRecordActionTitle: 'रिकॉर्ड अपलोड करें',
    uploadRecordActionDesc: 'अपने चिकित्सा इतिहास को डिजिटल बनाएं।',
    monitorVitalsActionTitle: 'लाइव मॉनिटर',
    monitorVitalsActionDesc: 'वास्तविक समय में हृदय गति और SpO2 ट्रैकिंग।',
    status: 'स्थिति',
    
    // Analytics
    analyticsTitle: 'एआई स्वास्थ्य विश्लेषण',
    analyticsSubtitle: 'आपके संपूर्ण चिकित्सा इतिहास और शारीरिक प्रोफ़ाइल पर आधारित एआई-संचालित अंतर्दृष्टि।',
    runAnalysis: 'स्वास्थ्य रिपोर्ट तैयार करें',
    analyzingHistory: 'रिकॉर्ड संसाधित हो रहे हैं...',
    healthIndexTrend: 'स्वास्थ्य सूचकांक रुझान',
    dietPlanTitle: 'एआई व्यक्तिगत आहार योजना',
    dietPlanSubtitle: 'आपके वजन, ऊंचाई और उम्र के लिए अनुकूलित।',
    physicalProfile: 'शारीरिक प्रोफ़ाइल',
    weight: 'वजन (किग्रा)',
    height: 'ऊंचाई (सेमी)',
    age: 'उम्र',
    saveProfile: 'प्रोफ़ाइल सहेजें',
    noRecordsToAnalyze: 'विश्लेषण करने के लिए पर्याप्त रिकॉर्ड नहीं हैं। पहले कुछ चिकित्सा दस्तावेज़ अपलोड करने का प्रयास करें!',
    noChangesDetected: 'कोई बदलाव नहीं मिला। नया विश्लेषण चलाने के लिए रिकॉर्ड जोड़ें या हटाएं।',
    lastAnalysis: 'पिछला विश्लेषण',
    analysisRecommendations: 'एआई सिफारिशें',
    bloodGroup: 'रक्त समूह',
    allergies: 'एलर्जी',

    // Share
    shareTitle: 'सेवा साझा करें',
    shareSubtitle: 'डॉक्टरों या आपातकालीन उत्तरदाताओं के साथ अपने चिकित्सा सारांश को साझा करने के लिए एक सुरक्षित क्यूआर कोड तैयार करें।',
    generateQR: 'क्यूआर कोड तैयार करें',
    scanMe: 'मेडिकल आईडी देखने के लिए स्कैन करें',
    medicalID: 'सत्यापित मेडिकल आईडी',
    emergencyAccessOnly: 'केवल चिकित्सा पेशेवरों के उपयोग के लिए।',

    // Symptom Checker & Recommendations
    describeSymptomsPrompt: 'सटीक एआई-संचालित विश्लेषण के लिए अपने लक्षणों का वर्णन करें।',
    symptoms: 'लक्षण',
    symptomsPlaceholder: 'जैसे, मुझे लगातार खांसी हो रही है...',
    selectLanguage: 'भाषा',
    voiceInput: 'आवाज',
    startRecording: 'रिकॉर्ड',
    stopRecording: 'रोकें',
    recording: 'सुन रहा हूँ...',
    submitSymptoms: 'लक्षणों का विश्लेषण करें',
    commonSymptoms: 'सामान्य',
    headache: 'सिरदर्द',
    fever: 'बुखार',
    cough: 'खांसी',
    fatigue: 'थकान',
    nausea: 'जी मिचलाना',
    shortBreath: 'सांस की तकलीफ',
    recommendationsTitle: 'विशेषज्ञ सिफारिशें',
    recommendationsSubtitle: 'सुझाए गए परामर्श मार्ग।',
    loadingRecommendations: 'लक्षण संसाधित हो रहे हैं...',
    errorRecommendations: 'परामर्श विफल रहा। पुनः प्रयास करें।',
    reasonForRecommendation: 'संदर्भ',
    sampleDoctors: 'विशेषज्ञ',
    bookAppointment: 'मुलाकात बुक करें',
    deepAnalysisTitle: "गहन विश्लेषण",
    disclaimerTitle: "अस्वीकरण",
    disclaimerText: "एआई द्वारा प्रदान की गई जानकारी चिकित्सा सलाह नहीं है।",
    potentialConditions: "संभावित स्थितियां",
    likelihood: "संभावना",
    severity: "गंभीरता",
    recommendedNextSteps: "अगले कदम",
    questionsForDoctor: "डॉक्टर के लिए प्रश्न",
    sources: "स्रोत",
    severityUrgent: "तत्काल",
    severityRoutine: "नियमित",
    severityMonitor: "निगरानी",
    getDeeperAnalysis: "विस्तृत रिपोर्ट",
    analyzing: "विश्लेषण हो रहा है...",

    // Records
    uploadRecordTitle: 'रिकॉर्ड अपलोड करें',
    uploadRecordSubtitle: 'अपने चिकित्सा दस्तावेजों को डिजिटल बनाएं।',
    uploadFromFile: 'फ़ाइल चुनें',
    useCamera: 'कैमरा खोलें',
    capture: 'कैप्चर करें',
    closeCamera: 'कैमरा बंद करें',
    imagePreview: 'पूर्वावलोकन',
    extractText: 'OCR चलाएं',
    extractingText: 'निकाला जा रहा है...',
    extractionError: 'स्कैन विफल रहा।',
    extractedText: 'निकाली गई सामग्री',
    analyzeAndTranslate: 'विश्लेषण और अनुवाद करें',
    
    analyzedRecordTitle: 'एआई विश्लेषण',
    analyzedRecordSubtitle: 'स्कैन किए गए दस्तावेज़ का सारांश।',
    selectTranslationLanguage: 'लक्ष्य भाषा',
    translationLoading: 'अनुवाद हो रहा है...',
    translationError: 'अनुवाद विफल रहा।',
    translatedText: 'अनुवाद',
    originalText: 'स्रोत',
    
    // Medications
    addMedication: 'दवा जोड़ें',
    editMedication: 'दवा संपादित करें',
    medicationName: 'दवा का नाम',
    dosage: 'खुराक',
    active: 'सक्रिय',
    inactive: 'निष्क्रिय',
    reminderTimes: 'शेड्यूल',
    addTime: 'समय जोड़ें',
    daysOfWeek: 'दिन',
    save: 'सहेजें',
    cancel: 'रद्द करें',
    delete: 'हटाएं',
    notificationPermission: 'अलर्ट सक्षम करें।',
    notificationsEnabled: 'अलर्ट सक्रिय',
    notificationsEnabledDesc: 'अनुस्मारक चालू हैं।',
    notificationsBlocked: 'अलर्ट ब्लॉक किए गए',
    notificationsBlockedDesc: 'ब्राउज़र सेटिंग्स जांचें।',
    getMedicationReminders: 'दवा अलर्ट',
    getMedicationRemindersDesc: 'खुराक सूचनाएं प्राप्त करें।',
    enableNotifications: 'अलर्ट सक्षम करें',
    
    // Drug Prices
    drugPricesTitle: 'फार्मेसी मूल्य निर्धारण',
    drugPricesSubtitle: 'ब्रांड बनाम जेनेरिक लागत की तुलना करें।',
    searchDrugPlaceholder: 'दवा खोजें...',
    search: 'खोजें',
    searching: 'सिंक हो रहा है...',
    errorDrugPrices: 'डेटा अनुपलब्ध है।',
    brandNamePrice: 'ब्रांड लागत',
    genericAlternatives: 'जेनेरिक',
    manufacturer: 'निर्माता',
    potentialSavings: 'बचत',
    
    // Vitals Monitor
    vitalsTitle: 'लाइव मॉनिटर',
    vitalsSubtitle: 'जुड़ा हुआ चिकित्सा ट्रैकिंग।',
    statusDisconnected: 'बंद',
    statusConnecting: 'लिंक हो रहा है...',
    statusConnected: 'सक्रिय',
    statusError: 'त्रुटि',
    connectDevice: 'डिवाइस पेयर करें',
    disconnectDevice: 'अनपेयर करें',
    heartRate: 'हृदय गति',
    bpm: 'BPM',
    bloodPressure: 'बीपी',
    oxygenSaturation: 'SpO2',
    sendEmergencyAlert: 'आपातकालीन अलर्ट',
    sendingAlert: 'प्रेषित हो रहा है...',
    alertSent: 'SOS भेज दिया गया',
    emergencyMessagePreview: 'अलर्ट प्रसारण:',
    alertGenerationError: 'SOS विफलता।',
    resetZoom: 'रीसेट',
    
    // Mental Health
    mentalHealthTitle: 'मानसिक कल्याण',
    mentalHealthSubtitle: 'भावनात्मक स्वास्थ्य उपकरण।',
    moodTrackerTitle: "दैनिक मूड",
    moodRecorded: "सहेजा गया",
    yourMoodThisWeek: 'साप्ताहिक रुझान',
    meditationTitle: "ध्यान",
    meditationDesc: "विश्राम उपकरण।",
    aiCompanionTitle: "एआई साथी",
    aiCompanionPlaceholder: "कुछ कहें...",
    aiCompanionSend: "भेजें",
    aiCompanionTyping: 'टाइप कर रहा है...',
    suggestMeditationAction: 'सत्र शुरू करें',
    moodStarterHappy: "बहुत बढ़िया! ऐसा क्या हुआ?",
    moodStarterGood: "उत्कृष्ट। मुख्य बातें?",
    moodStarterNeutral: "चेक-इन। विचार?",
    moodStarterWorried: "मैं यहाँ हूँ। आपके दिमाग में क्या है?",
    moodStarterSad: "चलो बात करते हैं। मैं सुन रहा हूँ।",
    aiCompanionSystemInstruction: "मैत्रीपूर्ण एआई कल्याण सहायता।",
    myJournal: "जर्नल",
    journalPlaceholder: "अपने विचार लिखें...",
    saveEntry: "सहेजें",
    editEntry: "संपादित करें",
    deleteEntry: "हटाएं",
    readMore: "अधिक",
    readLess: "कम",
    deleteConfirmation: "इसे हटाएं?",
  },
};

type Language = 'en' | 'hi';

interface TranslationsContextType {
  language: Language;
  setLanguage: (language: Language) => void;
  t: (key: keyof typeof translations.en, params?: Record<string, string | number>) => string;
}

const TranslationsContext = createContext<TranslationsContextType | undefined>(undefined);

export const TranslationsProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
    const [language, setLanguage] = useState<Language>('en');

    const t = useMemo(() => (key: keyof typeof translations.en, params?: Record<string, string | number>): string => {
        let translation = (translations[language] as any)[key] || (translations.en as any)[key];
        if (!translation) return key;
        if (params) {
            Object.keys(params).forEach(paramKey => {
                translation = translation.replace(`{${paramKey}}`, String(params[paramKey]));
            });
        }
        return translation;
    }, [language]);

    const value = {
        language,
        setLanguage,
        t,
    };

    return React.createElement(TranslationsContext.Provider, { value }, children);
};

export const useTranslations = () => {
    const context = useContext(TranslationsContext);
    if (context === undefined) {
        throw new Error('useTranslations must be used within a TranslationsProvider');
    }
    return context;
};